<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ChatVendaMais – Mentoria R$25</title>
  <meta name="description" content="Mentoria completa + mockup 1 mês — ChatVendaMais. Pagamento rápido via Mercado Pago." />
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Rajdhani:wght@600&display=swap" rel="stylesheet">
  <!-- confetti (ok usar CDN) -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js" defer></script>

  <style>
    :root{
      --bg1:#00120F; --bg2:#002D2A;
      --neon:#00ff88; --accent:#00bfff;
      --text:#E6FFF8; --muted:#bfeee6;
      --maxwidth:1100px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:"Rajdhani",sans-serif;
      color:var(--text);
      background: linear-gradient(180deg,var(--bg1),var(--bg2));
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      overflow-x:hidden;
    }

    /* Page container */
    .wrap{max-width:var(--maxwidth);margin:0 auto;padding:32px;min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:18px;text-align:center;position:relative}

    /* Background layers (parallax like) */
    .bg-layer{position:fixed;inset:0;z-index:-3;pointer-events:none;overflow:hidden}
    .bg-gradient{position:absolute;inset:-10%;background:radial-gradient(circle at 20% 20%, rgba(0,255,140,0.06), transparent 12%), radial-gradient(circle at 80% 80%, rgba(0,180,255,0.05), transparent 14%);filter:blur(6px);transform:scale(1.08)}
    .bg-grid{position:absolute;inset:0;background-image:linear-gradient(rgba(0,255,140,0.02) 1px, transparent 1px), linear-gradient(90deg, rgba(0,180,255,0.02) 1px, transparent 1px);background-size:220px 220px;opacity:0.55;mix-blend-mode:overlay}

    /* Animated particles (lightweight) */
    .particle{position:absolute;width:4px;height:4px;border-radius:50%;background:var(--neon);opacity:0.25;filter:blur(.6px);animation:rise linear infinite}
    @keyframes rise{from{transform:translateY(110vh)}to{transform:translateY(-30vh)}}

    /* Logo + heading */
    .logo-wrap{display:flex;flex-direction:column;align-items:center;gap:12px}
    .logo{width:320px;max-width:72%;border-radius:12px;box-shadow:0 12px 40px rgba(0,255,140,0.14);animation:logoFloat 6s ease-in-out infinite}
    @keyframes logoFloat{0%{transform:translateY(0)}50%{transform:translateY(-10px)}100%{transform:translateY(0)}}
    h1{font-family:"Orbitron",sans-serif;font-size:3.2rem;margin:0;text-shadow:0 0 18px rgba(0,255,140,0.18)}
    p.lead{margin:0;color:var(--muted);font-size:1.05rem}

    /* Robot SVG area (holographic) */
    .robot-wrap{width:220px;margin:8px auto 0}
    .robot-svg{width:100%;height:auto;display:block}

    /* CTA */
    .cta{margin-top:18px}
    .btn{
      appearance:none;border:0;cursor:pointer;padding:16px 48px;border-radius:999px;font-weight:700;
      background:linear-gradient(90deg,var(--accent),var(--neon));
      color:#001;box-shadow:0 12px 40px rgba(0,255,140,0.18);font-size:1.2rem;transition:transform .18s ease, box-shadow .18s;
    }
    .btn:active{transform:translateY(2px)}
    .btn:focus{outline:3px solid rgba(0,255,140,0.18)}

    /* Result / copy areas */
    .result{display:none;width:100%;max-width:820px;margin-top:18px}
    .card{background:rgba(0,0,0,0.45);border:1px solid rgba(0,255,140,0.12);padding:18px;border-radius:12px;color:var(--muted)}
    .copybtn{float:right;background:var(--neon);border:none;padding:8px 14px;border-radius:10px;font-weight:700;cursor:pointer}

    /* small screens */
    @media(max-width:640px){
      h1{font-size:2rem}
      .logo{width:220px}
      .robot-wrap{width:160px}
      .btn{padding:12px 28px;font-size:1rem}
    }
  </style>
</head>
<body>
  <!-- Background -->
  <div class="bg-layer" aria-hidden="true">
    <div class="bg-gradient"></div>
    <div class="bg-grid"></div>
    <!-- particles inserted by JS -->
  </div>

  <main class="wrap" role="main" aria-labelledby="pageTitle">
    <!-- logo (upload logo.png in repo root) -->
    <div class="logo-wrap" aria-hidden="false">
      <img src="logo.png" alt="ChatVendaMais logo" class="logo" id="siteLogo">
      <h1 id="pageTitle">CHATVENDA<span style="color:var(--neon)">MAIS</span></h1>
      <p class="lead">Mentoria completa + mockup interativo por 1 mês — uso único R$25</p>
    </div>

    <!-- holographic robot (SVG embedded and accessible) -->
    <figure class="robot-wrap" aria-hidden="false">
      <svg class="robot-svg" viewBox="0 0 120 140" role="img" aria-label="Robô holográfico">
        <!-- body -->
        <defs>
          <linearGradient id="g1" x1="0" x2="1"><stop offset="0" stop-color="#00ffd0"/><stop offset="1" stop-color="#00bfff"/></linearGradient>
          <filter id="glow"><feGaussianBlur stdDeviation="3.5" result="b"/><feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
        </defs>
        <rect x="22" y="32" rx="10" ry="10" width="76" height="56" fill="none" stroke="url(#g1)" stroke-width="2.6" filter="url(#glow)"/>
        <circle cx="46" cy="58" r="6.6" fill="url(#g1)">
          <animate attributeName="cy" values="58;55;58" dur="2s" repeatCount="indefinite"/>
        </circle>
        <circle cx="74" cy="58" r="6.6" fill="url(#g1)">
          <animate attributeName="cy" values="58;61;58" dur="2.2s" repeatCount="indefinite"/>
        </circle>
        <!-- head -->
        <rect x="36" y="10" rx="8" ry="8" width="48" height="28" stroke="url(#g1)" stroke-width="2.4" fill="rgba(0,0,0,0.08)" filter="url(#glow)"/>
        <!-- base arc -->
        <path d="M30 94 q30 24 60 0" stroke="rgba(0,255,140,0.06)" stroke-width="3" fill="none"/>
        <!-- scanning line -->
        <rect x="26" y="44" width="68" height="2" fill="rgba(0,255,140,0.05)">
          <animate attributeName="x" values="26;50;26" dur="3.8s" repeatCount="indefinite"/>
        </rect>
      </svg>
      <figcaption style="display:none">Robô holográfico ChatVendaMais</figcaption>
    </figure>

    <!-- CTA -->
    <div class="cta" role="region" aria-label="Área de pagamento">
      <button class="btn" id="payBtn" onclick="pagar()">PAGAR R$25 E LIBERAR AGORA</button>
    </div>

    <!-- result area -->
    <section class="result" id="resultSection" aria-live="polite">
      <div class="card" id="planCard">
        <strong>Seu plano aparecerá aqui após confirmação do pagamento.</strong>
        <p style="margin:.6rem 0" id="planText">—</p>
        <button class="copybtn" onclick="copiarTexto('planText')">COPIAR</button>
      </div>

      <div class="card" style="margin-top:12px">
        <strong>Brinde (mockup 30 dias)</strong>
        <p id="mockupText">https://www.figma.com/proto/abc123-chatvendamais-mockup</p>
        <button class="copybtn" onclick="copiarTexto('mockupText')">COPIAR</button>
      </div>
    </section>
  </main>

  <script>
  /* ===============================
     INSTRUÇÕES (importante, leia)
     - NÃO cole seu token no chat. Cole no arquivo index.html localmente.
     - Substitua as duas variáveis abaixo com:
         MP_ACCESS_TOKEN = "APP_USR-...."   (token de PRODUÇÃO do Mercado Pago)
         WEBHOOK_URL = "https://script.google.com/macros/....?action=payment"
     - Faça commit e abra: .../chatvendamais/?v=1
     =============================== */

  const MP_ACCESS_TOKEN = "APP_USR-COLE_SEU_TOKEN_AQUI"; // <-- substitua localmente
  const WEBHOOK_URL = "COLE_AQUI_SEU_WEBHOOK_URL";      // <-- substitua localmente

  // cria partículas leves (performáticas)
  (function createParticles(){
    const layer=document.querySelector('.bg-layer');
    for(let i=0;i<30;i++){
      const d=document.createElement('div');
      d.className='particle';
      d.style.left = Math.random()*100 + 'vw';
      d.style.top = (80 + Math.random()*30) + 'vh';
      d.style.width = d.style.height = (2 + Math.random()*5) + 'px';
      d.style.opacity = 0.12 + Math.random()*0.4;
      d.style.animationDuration = (10 + Math.random()*18) + 's';
      d.style.animationDelay = (-Math.random()*18) + 's';
      layer.appendChild(d);
    }
  })();

  // helpers
  function validarEmail(email){
    return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
  }
  function showResult(planText,mocked){
    document.getElementById('planText').innerText = planText || 'Plano gerado automaticamente.';
    document.getElementById('resultSection').style.display='block';
  }
  function copiarTexto(id){
    const t = document.getElementById(id).innerText || '';
    navigator.clipboard.writeText(t).then(()=>alert('Copiado!'), ()=>alert('Não foi possível copiar.'));
  }

  // pagar() com tratamento
  async function pagar(){
    // valida token substituído
    if(!MP_ACCESS_TOKEN || MP_ACCESS_TOKEN.includes('COLE_SEU')){
      alert('Token do Mercado Pago não configurado no arquivo. Abra index.html e cole o token em MP_ACCESS_TOKEN.');
      return;
    }

    let email = prompt('Seu melhor e-mail (receberá a mentoria):');
    if(!email) return;
    email = email.trim().toLowerCase();
    if(!validarEmail(email)){ alert('E-mail inválido.'); return; }

    const btn = document.getElementById('payBtn');
    btn.disabled = true;
    btn.innerText = 'Conectando...';

    try{
      const resp = await fetch('https://api.mercadopago.com/checkout/preferences', {
        method:'POST',
        headers:{
          'Content-Type':'application/json',
          'Authorization':'Bearer '+MP_ACCESS_TOKEN
        },
        body: JSON.stringify({
          items:[{ title:'ChatVendaMais – 1 Uso', quantity:1, currency_id:'BRL', unit_price:25 }],
          payer:{ email },
          external_reference: email,
          back_urls:{ success: location.href, failure: location.href, pending: location.href },
          auto_return: 'approved',
          notification_url: WEBHOOK_URL
        }),
        keepalive:true
      });

      const j = await resp.json();
      if(j && j.init_point){
        // redireciona para checkout Mercado Pago
        location.href = j.init_point;
      } else {
        console.error('MP response', j);
        alert('Falha ao criar checkout. Veja console para detalhes.');
        btn.disabled=false;
        btn.innerText='PAGAR R$25 E LIBERAR AGORA';
      }
    } catch(err){
      console.error(err);
      alert('Erro ao conectar com Mercado Pago. Ver console.');
      btn.disabled=false;
      btn.innerText='PAGAR R$25 E LIBERAR AGORA';
    }
  }

  // Se URL conter ?approved, mostra área resultado (caso webhook não processou)
  (function onLoadCheck(){
    if(location.search.includes('approved') || localStorage.getItem('pago')==='true'){
      // exemplo de conteúdo gerado (o webhook real deve completar o conteúdo via Apps Script)
      showResult('Parabéns! Mentoria liberada. Verifique seu e-mail com instruções.', true);
      confetti && confetti({particleCount:300,spread:100,origin:{y:0.6}}); // confetti se disponível
      localStorage.setItem('pago','true');
    }
  })();
  </script>
</body>
</html>
